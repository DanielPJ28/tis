<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feliz cumplea√±os ‚Äî Esposita</title>
  <style>
    /* Reset y tipograf√≠a */
    :root {
      --bg1: #111827;
      --bg2: #4f46e5;
      --accent: #ff6b81;
      --glass: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
      background: linear-gradient(160deg,var(--bg1), #1f2937 40%, var(--bg2));
      color: #fff;
      -webkit-font-smoothing:antialiased;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    /* Card principal */
    .card{
      width:100%;
      max-width:820px;
      border-radius:18px;
      padding:36px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    h1{
      margin:6px 0 8px;
      font-size:clamp(28px, 5.5vw, 48px);
      letter-spacing:0.6px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    .sparkle{
      font-size:0.7em;
      transform:translateY(-2px);
      opacity:0.95;
    }

    p.lead{
      margin:12px 0 20px;
      font-size:18px;
      line-height:1.5;
      color: #e6e6e6;
      max-width:680px;
      margin-left:auto;margin-right:auto;
    }

    .hearts {
      display:flex;
      gap:8px;
      justify-content:center;
      margin-top:10px;
    }
    .heart{
      font-size:22px;
      animation:beat 1.1s infinite ease-in-out;
      transform-origin:center;
    }
    .heart:nth-child(2){ animation-delay: .15s }
    .heart:nth-child(3){ animation-delay: .3s }

    @keyframes beat {
      0%{ transform: scale(1) translateY(0) }
      30%{ transform: scale(1.22) translateY(-6px) }
      60%{ transform: scale(.9) translateY(0) }
      100%{ transform: scale(1) translateY(0) }
    }

    /* Typewriter peque√±o */
    .typed {
      display:inline-block;
      border-right:2px solid rgba(255,255,255,0.7);
      padding-right:6px;
      margin-left:6px;
      white-space:nowrap;
      overflow:hidden;
    }

    /* Botones */
    .controls{
      margin-top:22px;
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
    }
    button{
      border:0;
      background:var(--glass);
      color:#fff;
      padding:10px 16px;
      border-radius:12px;
      cursor:pointer;
      font-size:15px;
      backdrop-filter: blur(6px);
    }
    button.secondary{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
    }

    /* Confetti canvas ocupando todo */
    #confettiCanvas{
      position:absolute;
      inset:0;
      pointer-events:none;
    }

    /* Footer discreto */
    .from{
      margin-top:18px;
      font-size:14px;
      color:rgba(255,255,255,0.7);
    }

    /* Responsivo */
    @media (max-width:420px){
      .card{ padding:20px }
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-label="Felicitaci√≥n de cumplea√±os">
    <canvas id="confettiCanvas"></canvas>

    <h1>Feliz cumplea√±os <span class="sparkle">Esposita ‚ú®</span></h1>

    <p class="lead">Eres el amor de mi vida, mi complemento perfecto. <span id="typed" class="typed"></span></p>

    <div class="hearts" aria-hidden="true">
      <div class="heart">‚ù§</div>
      <div class="heart">‚ù§</div>
      <div class="heart">‚ù§</div>
    </div>

    <div class="controls">
      <button id="playConfetti">üéâ Celebrar</button>
      <button id="toggleMusic" class="secondary">üîà M√∫sica: OFF</button>
      <button id="downloadPNG" class="secondary">üì∏ Guardar imagen</button>
    </div>

    <div class="from">Con todo mi coraz√≥n... tu esposito <strong>Juan Ruiz</strong></div>
  </div>

  <audio id="bgm" loop preload="auto">
    <!-- Si quieres, reemplaza src por la URL de una m√∫sica libre de derechos -->
    <source src="" type="audio/mpeg">
  </audio>

  <script>
    // --- Typewriter simple ---
    const text = "¬°Te amo, Miriam!";
    const el = document.getElementById('typed');
    let i=0;
    function typeStep(){
      if(i <= text.length){
        el.textContent = text.slice(0,i);
        i++;
        setTimeout(typeStep, 90);
      } else {
        // cursor blink stop after finish
        el.style.borderRight = "2px solid rgba(255,255,255,0.0)";
      }
    }
    typeStep();

    // --- Confetti minimal (canvas) ---
    const canvas = document.getElementById('confettiCanvas');
    const ctx = canvas.getContext('2d');
    let W, H;
    function fit(){
      canvas.width = W = canvas.clientWidth;
      canvas.height = H = canvas.clientHeight;
    }
    window.addEventListener('resize', fit);
    fit();

    // particles
    function random(min,max){ return Math.random()*(max-min)+min }
    class Particle {
      constructor(){
        this.reset();
      }
      reset(){
        this.x = random(0,W);
        this.y = random(-H,0);
        this.w = random(6,14);
        this.h = this.w * 0.6;
        this.color = ['#ff6b81','#ffd166','#7bd389','#86b9ff','#c084fc'][Math.floor(Math.random()*5)];
        this.vx = random(-1.2,1.2);
        this.vy = random(2,5);
        this.rot = random(0,Math.PI*2);
        this.spin = random(-0.15,0.15);
      }
      update(){
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.02; // gravity
        this.rot += this.spin;
        if(this.y > H + 30) this.reset();
      }
      draw(){
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rot);
        ctx.fillStyle = this.color;
        ctx.fillRect(-this.w/2, -this.h/2, this.w, this.h);
        ctx.restore();
      }
    }

    let particles = [];
    function makeConfetti(n=120){
      particles = [];
      for(let j=0;j<n;j++) particles.push(new Particle());
      renderConfetti();
    }
    let running=false;
    function renderConfetti(){
      if(!running) return;
      ctx.clearRect(0,0,W,H);
      for(const p of particles){ p.update(); p.draw(); }
      requestAnimationFrame(renderConfetti);
    }

    document.getElementById('playConfetti').addEventListener('click', ()=>{
      if(running) return;
      running = true;
      makeConfetti(120);
      setTimeout(()=> running=false, 6000);
    });

    // --- M√∫sica simple toggle ---
    const bgm = document.getElementById('bgm');
    const toggleMusic = document.getElementById('toggleMusic');
    let musicOn=false;
    toggleMusic.addEventListener('click', ()=>{
      if(!musicOn){
        // Si quieres usar un archivo local, pon la ruta en el elemento <audio> o asigna src aqu√≠
        // bgm.src = 'ruta/a/tu/musica.mp3';
        bgm.play().catch(()=>{/*autoplay puede bloquearse; user must interact first*/});
        toggleMusic.textContent = "üîä M√∫sica: ON";
      } else {
        bgm.pause();
        toggleMusic.textContent = "üîà M√∫sica: OFF";
      }
      musicOn = !musicOn;
    });

    // --- Guardar imagen (screenshot simple del area card) ---
    document.getElementById('downloadPNG').addEventListener('click', async ()=>{
      // Usamos html2canvas-style minimal fall-back: crear canvas y copiar pixels del body no es trivial;
      // Por simplicidad recomendamos usar la API css-paint o biblioteca html2canvas. Aqu√≠ damos una alternativa:
      alert("Para guardar como imagen te recomiendo usar la extensi√≥n o usar 'Imprimir -> Guardar como PDF' o instalar html2canvas y pegarla en el proyecto. Si quieres, te doy el ejemplo con html2canvas.");
    });

    // Nota: la funci√≥n de guardar como imagen suele trabajarse con la librer√≠a html2canvas (npm) o dom-to-image.
    // Si quieres que te incluya html2canvas y el flujo completo, te lo agrego al c√≥digo.

  </script>
</body>
</html>
